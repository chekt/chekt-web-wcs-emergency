(self.webpackChunkchekt_web_wcs=self.webpackChunkchekt_web_wcs||[]).push([[4036],{55025:(q,nt,L)=>{q.exports=function(l){var M=l.helpers,O=L(10186)(l),p=L(33781)(l),v=l.Annotation.types;function A(f){O.decorate(f,"afterDataLimits",function(r,h){r&&r(h),O.adjustScaleRange(h)})}function b(f){return function(r,h){var g=r.annotation.options.drawTime;O.elements(r).filter(function(F){return f===(F.options.drawTime||g)}).forEach(function(F){F.transition(h).draw()})}}return{beforeInit:function(f){var r=f.options,h=f.annotation={elements:{},options:O.initConfig(r.annotation||{}),onDestroy:[],firstRun:!0,supported:!1};f.ensureScalesHaveIDs(),r.scales&&(h.supported=!0,M.each(r.scales.xAxes,A),M.each(r.scales.yAxes,A))},beforeUpdate:function(f){var r=f.annotation;if(r.supported){r.firstRun?r.firstRun=!1:r.options=O.initConfig(f.options.annotation||{});var h=[];r.options.annotations.forEach(function(g){var F=g.id||O.objectId();if(!r.elements[F]&&v[g.type]){var D=new(0,v[g.type])({id:F,options:g,chartInstance:f});D.initialize(),r.elements[F]=D,g.id=F,h.push(F)}else r.elements[F]&&h.push(F)}),Object.keys(r.elements).forEach(function(g){-1===h.indexOf(g)&&(r.elements[g].destroy(),delete r.elements[g])})}},afterScaleUpdate:function(f){O.elements(f).forEach(function(r){r.configure()})},beforeDatasetsDraw:b("beforeDatasetsDraw"),afterDatasetsDraw:b("afterDatasetsDraw"),afterDraw:b("afterDraw"),afterInit:function(f){var r=f.annotation.options.events;if(M.isArray(r)&&r.length>0){var h=f.chart.canvas,g=p.dispatcher.bind(f);p.collapseHoverEvents(r).forEach(function(F){M.addEvent(h,F,g),f.annotation.onDestroy.push(function(){M.removeEvent(h,F,g)})})}},destroy:function(f){for(var r=f.annotation.onDestroy;r.length>0;)r.pop()()}}}},66270:q=>{q.exports=function(nt){var L=nt.helpers;return nt.Element.extend({initialize:function(){this.hidden=!1,this.hovering=!1,this._model=L.clone(this._model)||{},this.setDataLimits()},destroy:function(){},setDataLimits:function(){},configure:function(){},inRange:function(){},getCenterPoint:function(){},getWidth:function(){},getHeight:function(){},getArea:function(){},draw:function(){}})}},33781:(q,nt,L)=>{q.exports=function(l){var M=l.helpers,O=L(10186)(l);function p(A){var b=!1,f=A.filter(function(r){switch(r){case"mouseenter":case"mouseover":case"mouseout":case"mouseleave":return b=!0,!1;default:return!0}});return b&&-1===f.indexOf("mousemove")&&f.push("mousemove"),f}return{dispatcher:function(A){var b=this.annotation,f=O.elements(this),r=M.getRelativePosition(A,this.chart),h=O.getNearestItems(f,r),g=p(b.options.events),F=b.options.dblClickSpeed,_=[],D=O.getEventHandlerName(A.type),E=(h||{}).options;if("mousemove"===A.type&&(h&&!h.hovering?["mouseenter","mouseover"].forEach(function(C){var R=O.getEventHandlerName(C),$=O.createMouseEvent(C,A);h.hovering=!0,"function"==typeof E[R]&&_.push([E[R],$,h])}):h||f.forEach(function(C){if(C.hovering){C.hovering=!1;var R=C.options;["mouseout","mouseleave"].forEach(function($){var W=O.getEventHandlerName($),J=O.createMouseEvent($,A);"function"==typeof R[W]&&_.push([R[W],J,C])})}})),h&&g.indexOf("dblclick")>-1&&"function"==typeof E.onDblclick){if("click"===A.type&&"function"==typeof E.onClick)return clearTimeout(h.clickTimeout),h.clickTimeout=setTimeout(function(){delete h.clickTimeout,E.onClick.call(h,A)},F),A.stopImmediatePropagation(),void A.preventDefault();"dblclick"===A.type&&h.clickTimeout&&(clearTimeout(h.clickTimeout),delete h.clickTimeout)}h&&"function"==typeof E[D]&&0===_.length&&_.push([E[D],A,h]),_.length>0&&(A.stopImmediatePropagation(),A.preventDefault(),_.forEach(function(C){C[0].call(C[2],C[1])}))},collapseHoverEvents:p}}},10186:q=>{function nt(){}function L(b){var f=b.annotation.elements;return Object.keys(f).map(function(r){return f[r]})}function l(){return Math.random().toString(36).substr(2,6)}function M(b){return null!=b&&("number"==typeof b?isFinite(b):!!b)}function O(b,f,r){var h="$";b[h+f]||(b[f]?(b[h+f]=b[f].bind(b),b[f]=function(){var g=[b[h+f]].concat(Array.prototype.slice.call(arguments));return r.apply(b,g)}):b[f]=function(){var g=[void 0].concat(Array.prototype.slice.call(arguments));return r.apply(b,g)})}function p(b,f){b.forEach(function(r){(f?r[f]:r)()})}function v(b){return"on"+b[0].toUpperCase()+b.substring(1)}function A(b,f){try{return new MouseEvent(b,f)}catch(g){try{var r=document.createEvent("MouseEvent");return r.initMouseEvent(b,f.canBubble,f.cancelable,f.view,f.detail,f.screenX,f.screenY,f.clientX,f.clientY,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,f.button,f.relatedTarget),r}catch(F){var h=document.createEvent("Event");return h.initEvent(b,f.canBubble,f.cancelable),h}}}q.exports=function(b){var f=b.helpers;return{initConfig:function(_){return _=f.configMerge(b.Annotation.defaults,_),f.isArray(_.annotations)&&_.annotations.forEach(function(D){D.label=f.configMerge(b.Annotation.labelDefaults,D.label)}),_},elements:L,callEach:p,noop:nt,objectId:l,isValid:M,decorate:O,adjustScaleRange:function(_){var D=function(_,D,E,C){var R=D.filter(function(J){return!!J._model.ranges[_]}).map(function(J){return J._model.ranges[_]});return{min:R.map(function(J){return Number(J.min)}).reduce(function(J,it){return isFinite(it)&&!isNaN(it)&&it<J?it:J},E),max:R.map(function(J){return Number(J.max)}).reduce(function(J,it){return isFinite(it)&&!isNaN(it)&&it>J?it:J},C)}}(_.id,L(_.chart),_.min,_.max);void 0===_.options.ticks.min&&void 0===_.options.ticks.suggestedMin&&(_.min=D.min),void 0===_.options.ticks.max&&void 0===_.options.ticks.suggestedMax&&(_.max=D.max),_.handleTickRangeOptions&&_.handleTickRangeOptions()},getNearestItems:function(_,D){var E=Number.POSITIVE_INFINITY;return _.filter(function(C){return C.inRange(D.x,D.y)}).reduce(function(C,R){var $=R.getCenterPoint(),W=f.distanceBetweenPoints(D,$);return W<E?(C=[R],E=W):W===E&&C.push(R),C},[]).sort(function(C,R){var $=C.getArea(),W=R.getArea();return $>W||$<W?$-W:C._index-R._index}).slice(0,1)[0]},getEventHandlerName:v,createMouseEvent:A}}},62117:(q,nt,L)=>{var l=L(25119);(l="function"==typeof l?l:window.Chart).Annotation=l.Annotation||{},l.Annotation.drawTimeOptions={afterDraw:"afterDraw",afterDatasetsDraw:"afterDatasetsDraw",beforeDatasetsDraw:"beforeDatasetsDraw"},l.Annotation.defaults={drawTime:"afterDatasetsDraw",dblClickSpeed:350,events:[],annotations:[]},l.Annotation.labelDefaults={backgroundColor:"rgba(0,0,0,0.8)",fontFamily:l.defaults.global.defaultFontFamily,fontSize:l.defaults.global.defaultFontSize,fontStyle:"bold",fontColor:"#fff",xPadding:6,yPadding:6,cornerRadius:6,position:"center",xAdjust:0,yAdjust:0,enabled:!1,content:null},l.Annotation.Element=L(66270)(l),l.Annotation.types={line:L(60067)(l),box:L(48998)(l)};var M=L(55025)(l);q.exports=M,l.pluginService.register(M)},48998:(q,nt,L)=>{q.exports=function(l){var M=L(10186)(l);return l.Annotation.Element.extend({setDataLimits:function(){var p=this._model,v=this.options,A=this.chartInstance,b=A.scales[v.xScaleID],f=A.scales[v.yScaleID],r=A.chartArea;if(p.ranges={},r){var h=0,g=0;b&&(h=M.isValid(v.xMin)?v.xMin:b.getPixelForValue(r.left),g=M.isValid(v.xMax)?v.xMax:b.getPixelForValue(r.right),p.ranges[v.xScaleID]={min:Math.min(h,g),max:Math.max(h,g)}),f&&(h=M.isValid(v.yMin)?v.yMin:f.getPixelForValue(r.bottom),g=M.isValid(v.yMax)?v.yMax:f.getPixelForValue(r.top),p.ranges[v.yScaleID]={min:Math.min(h,g),max:Math.max(h,g)})}},configure:function(){var p=this._model,v=this.options,A=this.chartInstance,b=A.scales[v.xScaleID],f=A.scales[v.yScaleID],r=A.chartArea;p.clip={x1:r.left,x2:r.right,y1:r.top,y2:r.bottom};var D,E,h=r.left,g=r.top,F=r.right,_=r.bottom;b&&(D=M.isValid(v.xMin)?b.getPixelForValue(v.xMin):r.left,E=M.isValid(v.xMax)?b.getPixelForValue(v.xMax):r.right,h=Math.min(D,E),F=Math.max(D,E)),f&&(D=M.isValid(v.yMin)?f.getPixelForValue(v.yMin):r.bottom,E=M.isValid(v.yMax)?f.getPixelForValue(v.yMax):r.top,g=Math.min(D,E),_=Math.max(D,E)),p.left=h,p.top=g,p.right=F,p.bottom=_,p.borderColor=v.borderColor,p.borderWidth=v.borderWidth,p.backgroundColor=v.backgroundColor},inRange:function(p,v){var A=this._model;return A&&p>=A.left&&p<=A.right&&v>=A.top&&v<=A.bottom},getCenterPoint:function(){var p=this._model;return{x:(p.right+p.left)/2,y:(p.bottom+p.top)/2}},getWidth:function(){var p=this._model;return Math.abs(p.right-p.left)},getHeight:function(){var p=this._model;return Math.abs(p.bottom-p.top)},getArea:function(){return this.getWidth()*this.getHeight()},draw:function(){var p=this._view,v=this.chartInstance.chart.ctx;v.save(),v.beginPath(),v.rect(p.clip.x1,p.clip.y1,p.clip.x2-p.clip.x1,p.clip.y2-p.clip.y1),v.clip(),v.lineWidth=p.borderWidth,v.strokeStyle=p.borderColor,v.fillStyle=p.backgroundColor;var A=p.right-p.left,b=p.bottom-p.top;v.fillRect(p.left,p.top,A,b),v.strokeRect(p.left,p.top,A,b),v.restore()}})}},60067:(q,nt,L)=>{q.exports=function(l){var M=l.helpers,O=L(10186)(l),p="horizontal",v="vertical";function b(r){var h=(r.x2-r.x1)/(r.y2-r.y1),g=r.x1||0;this.m=h,this.b=g,this.getX=function(F){return h*(F-r.y1)+g},this.getY=function(F){return(F-g)/h+r.y1},this.intersects=function(F,_,D){D=D||.001;var E=this.getY(F),C=this.getX(_);return(!isFinite(E)||Math.abs(_-E)<D)&&(!isFinite(C)||Math.abs(F-C)<D)}}return l.Annotation.Element.extend({setDataLimits:function(){var r=this._model,h=this.options;r.ranges={},r.ranges[h.scaleID]={min:h.value,max:h.endValue||h.value}},configure:function(){var D,E,r=this._model,h=this.options,g=this.chartInstance,F=g.chart.ctx,_=g.scales[h.scaleID];if(_&&(D=O.isValid(h.value)?_.getPixelForValue(h.value):NaN,E=O.isValid(h.endValue)?_.getPixelForValue(h.endValue):D),!isNaN(D)){var C=g.chartArea;r.clip={x1:C.left,x2:C.right,y1:C.top,y2:C.bottom},this.options.mode==p?(r.x1=C.left,r.x2=C.right,r.y1=D,r.y2=E):(r.y1=C.top,r.y2=C.bottom,r.x1=D,r.x2=E),r.line=new b(r),r.mode=h.mode,r.labelBackgroundColor=h.label.backgroundColor,r.labelFontFamily=h.label.fontFamily,r.labelFontSize=h.label.fontSize,r.labelFontStyle=h.label.fontStyle,r.labelFontColor=h.label.fontColor,r.labelXPadding=h.label.xPadding,r.labelYPadding=h.label.yPadding,r.labelCornerRadius=h.label.cornerRadius,r.labelPosition=h.label.position,r.labelXAdjust=h.label.xAdjust,r.labelYAdjust=h.label.yAdjust,r.labelEnabled=h.label.enabled,r.labelContent=h.label.content,F.font=M.fontString(r.labelFontSize,r.labelFontStyle,r.labelFontFamily);var R=F.measureText(r.labelContent).width,$=F.measureText("M").width,W=function(r,h,g,F,_){var D=r.line,E={},C=0,R=0;switch(!0){case r.mode==v&&"top"==r.labelPosition:C=h/2+r.labelXAdjust,E.y=r.y1+(R=_+r.labelYAdjust),E.x=(isFinite(D.m)?D.getX(E.y):r.x1)-C;break;case r.mode==v&&"bottom"==r.labelPosition:C=h/2+r.labelXAdjust,E.y=r.y2-(R=g+_+r.labelYAdjust),E.x=(isFinite(D.m)?D.getX(E.y):r.x1)-C;break;case r.mode==p&&"left"==r.labelPosition:R=-g/2+r.labelYAdjust,E.x=r.x1+(C=F+r.labelXAdjust),E.y=D.getY(E.x)+R;break;case r.mode==p&&"right"==r.labelPosition:R=-g/2+r.labelYAdjust,E.x=r.x2-(C=h+F+r.labelXAdjust),E.y=D.getY(E.x)+R;break;default:E.x=(r.x1+r.x2-h)/2+r.labelXAdjust,E.y=(r.y1+r.y2-g)/2+r.labelYAdjust}return E}(r,R,$,r.labelXPadding,r.labelYPadding);r.labelX=W.x-r.labelXPadding,r.labelY=W.y-r.labelYPadding,r.labelWidth=R+2*r.labelXPadding,r.labelHeight=$+2*r.labelYPadding,r.borderColor=h.borderColor,r.borderWidth=h.borderWidth,r.borderDash=h.borderDash||[],r.borderDashOffset=h.borderDashOffset||0}},inRange:function(r,h){var g=this._model;return g.line&&g.line.intersects(r,h,this.getHeight())||g.labelEnabled&&g.labelContent&&r>=g.labelX&&r<=g.labelX+g.labelWidth&&h>=g.labelY&&h<=g.labelY+g.labelHeight},getCenterPoint:function(){return{x:(this._model.x2+this._model.x1)/2,y:(this._model.y2+this._model.y1)/2}},getWidth:function(){return Math.abs(this._model.right-this._model.left)},getHeight:function(){return this._model.borderWidth||1},getArea:function(){return Math.sqrt(Math.pow(this.getWidth(),2)+Math.pow(this.getHeight(),2))},draw:function(){var r=this._view,h=this.chartInstance.chart.ctx;!r.clip||(h.save(),h.beginPath(),h.rect(r.clip.x1,r.clip.y1,r.clip.x2-r.clip.x1,r.clip.y2-r.clip.y1),h.clip(),h.lineWidth=r.borderWidth,h.strokeStyle=r.borderColor,h.setLineDash&&h.setLineDash(r.borderDash),h.lineDashOffset=r.borderDashOffset,h.beginPath(),h.moveTo(r.x1,r.y1),h.lineTo(r.x2,r.y2),h.stroke(),r.labelEnabled&&r.labelContent&&(h.beginPath(),h.rect(r.clip.x1,r.clip.y1,r.clip.x2-r.clip.x1,r.clip.y2-r.clip.y1),h.clip(),h.fillStyle=r.labelBackgroundColor,M.drawRoundedRectangle(h,r.labelX,r.labelY,r.labelWidth,r.labelHeight,r.labelCornerRadius),h.fill(),h.font=M.fontString(r.labelFontSize,r.labelFontStyle,r.labelFontFamily),h.fillStyle=r.labelFontColor,h.textAlign="center",h.textBaseline="middle",h.fillText(r.labelContent,r.labelX+r.labelWidth/2,r.labelY+r.labelHeight/2)),h.restore())}})}},2931:function(q,nt,L){q.exports=function(l){"use strict";function M(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var O=M(l),p=O.default.helpers,v=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),A={toTextLines:function(t){var e,i=[];for(t=[].concat(t);t.length;)"string"==typeof(e=t.pop())?i.unshift.apply(i,e.split("\n")):Array.isArray(e)?t.push.apply(t,e):p.isNullOrUndef(t)||i.unshift(""+e);return i},toFontString:function(t){return!t||p.isNullOrUndef(t.size)||p.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family},textSize:function(t,i,e){var y,a=[].concat(i),n=a.length,o=t.font,c=0;for(t.font=e.string,y=0;y<n;++y)c=Math.max(t.measureText(a[y]).width,c);return t.font=o,{height:n*e.lineHeight,width:c}},parseFont:function(t){var i=O.default.defaults.global,e=p.valueOrDefault(t.size,i.defaultFontSize),a={family:p.valueOrDefault(t.family,i.defaultFontFamily),lineHeight:p.options.toLineHeight(t.lineHeight,e),size:e,style:p.valueOrDefault(t.style,i.defaultFontStyle),weight:p.valueOrDefault(t.weight,null),string:""};return a.string=A.toFontString(a),a},bound:function(t,i,e){return Math.max(t,Math.min(i,e))},arrayDiff:function(t,i){var n,o,c,y,e=t.slice(),a=[];for(n=0,c=i.length;n<c;++n)-1===(o=e.indexOf(y=i[n]))?a.push([y,1]):e.splice(o,1);for(n=0,c=e.length;n<c;++n)a.push([e[n],-1]);return a},rasterize:function(t){return Math.round(t*v)/v}};function b(t,i){var e=i.x,a=i.y;if(null===e)return{x:0,y:-1};if(null===a)return{x:1,y:0};var n=t.x-e,o=t.y-a,c=Math.sqrt(n*n+o*o);return{x:c?n/c:0,y:c?o/c:-1}}function D(t,i,e){var a=0;return t<e.left?a|=1:t>e.right&&(a|=2),i<e.top?a|=8:i>e.bottom&&(a|=4),a}function C(t,i){var n,o,e=i.anchor,a=t;return i.clamp&&(a=function(t,i){for(var S,P,I,e=t.x0,a=t.y0,n=t.x1,o=t.y1,c=D(e,a,i),y=D(n,o,i);c|y&&!(c&y);)8&(S=c||y)?(P=e+(n-e)*(i.top-a)/(o-a),I=i.top):4&S?(P=e+(n-e)*(i.bottom-a)/(o-a),I=i.bottom):2&S?(I=a+(o-a)*(i.right-e)/(n-e),P=i.right):1&S&&(I=a+(o-a)*(i.left-e)/(n-e),P=i.left),S===c?c=D(e=P,a=I,i):y=D(n=P,o=I,i);return{x0:e,x1:n,y0:a,y1:o}}(a,i.area)),"start"===e?(n=a.x0,o=a.y0):"end"===e?(n=a.x1,o=a.y1):(n=(a.x0+a.x1)/2,o=(a.y0+a.y1)/2),function(t,i,e,a,n){switch(n){case"center":e=a=0;break;case"bottom":e=0,a=1;break;case"right":e=1,a=0;break;case"left":e=-1,a=0;break;case"top":e=0,a=-1;break;case"start":e=-e,a=-a;break;case"end":break;default:n*=Math.PI/180,e=Math.cos(n),a=Math.sin(n)}return{x:t,y:i,vx:e,vy:a}}(n,o,t.vx,t.vy,i.align)}var R={arc:function(t,i){var e=(t.startAngle+t.endAngle)/2,a=Math.cos(e),n=Math.sin(e),o=t.innerRadius,c=t.outerRadius;return C({x0:t.x+a*o,y0:t.y+n*o,x1:t.x+a*c,y1:t.y+n*c,vx:a,vy:n},i)},point:function(t,i){var e=b(t,i.origin),a=e.x*t.radius,n=e.y*t.radius;return C({x0:t.x-a,y0:t.y-n,x1:t.x+a,y1:t.y+n,vx:e.x,vy:e.y},i)},rect:function(t,i){var e=b(t,i.origin),a=t.x,n=t.y,o=0,c=0;return t.horizontal?(a=Math.min(t.x,t.base),o=Math.abs(t.base-t.x)):(n=Math.min(t.y,t.base),c=Math.abs(t.base-t.y)),C({x0:a,y0:n+c,x1:a+o,y1:n,vx:e.x,vy:e.y},i)},fallback:function(t,i){var e=b(t,i.origin);return C({x0:t.x,y0:t.y,x1:t.x,y1:t.y,vx:e.x,vy:e.y},i)}},$=O.default.helpers,W=A.rasterize;function it(t){var i=t._model.horizontal,e=t._scale||i&&t._xScale||t._yScale;if(!e)return null;if(void 0!==e.xCenter&&void 0!==e.yCenter)return{x:e.xCenter,y:e.yCenter};var a=e.getBasePixel();return i?{x:a,y:null}:{x:null,y:a}}function ft(t){return t instanceof O.default.elements.Arc?R.arc:t instanceof O.default.elements.Point?R.point:t instanceof O.default.elements.Rectangle?R.rect:R.fallback}function bt(t,i,e){var a=t.shadowBlur,n=e.stroked,o=W(e.x),c=W(e.y),y=W(e.w);n&&t.strokeText(i,o,c,y),e.filled&&(a&&n&&(t.shadowBlur=0),t.fillText(i,o,c,y),a&&n&&(t.shadowBlur=a))}var B=function(t,i,e,a){var n=this;n._config=t,n._index=a,n._model=null,n._rects=null,n._ctx=i,n._el=e};$.extend(B.prototype,{_modelize:function(t,i,e,a){var n=this,o=n._index,c=$.options.resolve,y=A.parseFont(c([e.font,{}],a,o)),S=c([e.color,O.default.defaults.global.defaultFontColor],a,o);return{align:c([e.align,"center"],a,o),anchor:c([e.anchor,"center"],a,o),area:a.chart.chartArea,backgroundColor:c([e.backgroundColor,null],a,o),borderColor:c([e.borderColor,null],a,o),borderRadius:c([e.borderRadius,0],a,o),borderWidth:c([e.borderWidth,0],a,o),clamp:c([e.clamp,!1],a,o),clip:c([e.clip,!1],a,o),color:S,display:t,font:y,lines:i,offset:c([e.offset,0],a,o),opacity:c([e.opacity,1],a,o),origin:it(n._el),padding:$.options.toPadding(c([e.padding,0],a,o)),positioner:ft(n._el),rotation:c([e.rotation,0],a,o)*(Math.PI/180),size:A.textSize(n._ctx,i,y),textAlign:c([e.textAlign,"start"],a,o),textShadowBlur:c([e.textShadowBlur,0],a,o),textShadowColor:c([e.textShadowColor,S],a,o),textStrokeColor:c([e.textStrokeColor,S],a,o),textStrokeWidth:c([e.textStrokeWidth,0],a,o)}},update:function(t){var c,y,S,i=this,e=null,a=null,n=i._index,o=i._config,P=$.options.resolve([o.display,!0],t,n);P&&(y=$.valueOrDefault($.callback(o.formatter,[c=t.dataset.data[n],t]),c),(S=$.isNullOrUndef(y)?[]:A.toTextLines(y)).length&&(a=function(t){var i=t.borderWidth||0,e=t.padding,a=t.size.height,n=t.size.width,o=-n/2,c=-a/2;return{frame:{x:o-e.left-i,y:c-e.top-i,w:n+e.width+2*i,h:a+e.height+2*i},text:{x:o,y:c,w:n,h:a}}}(e=i._modelize(P,S,o,t)))),i._model=e,i._rects=a},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,i){var c,a=t.ctx,n=this._model,o=this._rects;!this.visible()||(a.save(),n.clip&&(c=n.area,a.beginPath(),a.rect(c.left,c.top,c.right-c.left,c.bottom-c.top),a.clip()),a.globalAlpha=A.bound(0,n.opacity,1),a.translate(W(i.x),W(i.y)),a.rotate(n.rotation),function(t,i,e){var a=e.backgroundColor,n=e.borderColor,o=e.borderWidth;!a&&(!n||!o)||(t.beginPath(),$.canvas.roundedRect(t,W(i.x)+o/2,W(i.y)+o/2,W(i.w)-o,W(i.h)-o,e.borderRadius),t.closePath(),a&&(t.fillStyle=a,t.fill()),n&&o&&(t.strokeStyle=n,t.lineWidth=o,t.lineJoin="miter",t.stroke()))}(a,o.frame,n),function(t,i,e,a){var at,n=a.textAlign,o=a.color,c=!!o,y=a.font,S=i.length,P=a.textStrokeColor,I=a.textStrokeWidth,Q=P&&I;if(S&&(c||Q))for(e=function(t,i,e){var a=e.lineHeight,n=t.w,o=t.x;return"center"===i?o+=n/2:("end"===i||"right"===i)&&(o+=n),{h:a,w:n,x:o,y:t.y+a/2}}(e,n,y),t.font=y.string,t.textAlign=n,t.textBaseline="middle",t.shadowBlur=a.textShadowBlur,t.shadowColor=a.textShadowColor,c&&(t.fillStyle=o),Q&&(t.lineJoin="round",t.lineWidth=I,t.strokeStyle=P),at=0,S=i.length;at<S;++at)bt(t,i[at],{stroked:Q,filled:c,w:e.w,x:e.x,y:e.y+e.h*at})}(a,n.lines,o.text,n),a.restore())}});var d=Number.MIN_SAFE_INTEGER||-9007199254740991,x=Number.MAX_SAFE_INTEGER||9007199254740991;function k(t,i,e){var a=Math.cos(e),n=Math.sin(e),o=i.x,c=i.y;return{x:o+a*(t.x-o)-n*(t.y-c),y:c+n*(t.x-o)+a*(t.y-c)}}function u(t,i){var o,c,P,e=x,a=d,n=i.origin;for(o=0;o<t.length;++o)P=i.vx*((c=t[o]).x-n.x)+i.vy*(c.y-n.y),e=Math.min(e,P),a=Math.max(a,P);return{min:e,max:a}}function m(t,i){var e=i.x-t.x,a=i.y-t.y,n=Math.sqrt(e*e+a*a);return{vx:(i.x-t.x)/n,vy:(i.y-t.y)/n,origin:t,ln:n}}var T=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function U(t,i,e){var a=i.positioner(t,i),n=a.vx,o=a.vy;if(!n&&!o)return{x:a.x,y:a.y};var c=e.w,y=e.h,S=i.rotation,P=Math.abs(c/2*Math.cos(S))+Math.abs(y/2*Math.sin(S)),I=Math.abs(c/2*Math.sin(S))+Math.abs(y/2*Math.cos(S)),Q=1/Math.max(Math.abs(n),Math.abs(o));return P*=n*Q,I*=o*Q,{x:a.x+(P+=i.offset*n),y:a.y+(I+=i.offset*o)}}O.default.helpers.extend(T.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,i,e){this._rotation=e,this._rect={x:i.x+t.x,y:i.y+t.y,w:i.w,h:i.h}},contains:function(t){var i=this,a=i._rect;return!((t=k(t,i.center(),-i._rotation)).x<a.x-1||t.y<a.y-1||t.x>a.x+a.w+2||t.y>a.y+a.h+2)},intersects:function(t){var n,o,c,i=this._points(),e=t._points(),a=[m(i[0],i[1]),m(i[0],i[3])];for(this._rotation!==t._rotation&&a.push(m(e[0],e[1]),m(e[0],e[3])),n=0;n<a.length;++n)if(o=u(i,a[n]),c=u(e,a[n]),o.max<c.min||c.max<o.min)return!1;return!0},_points:function(){var t=this,i=t._rect,e=t._rotation,a=t.center();return[k({x:i.x,y:i.y},a,e),k({x:i.x+i.w,y:i.y},a,e),k({x:i.x+i.w,y:i.y+i.h},a,e),k({x:i.x,y:i.y+i.h},a,e)]}});var X={prepare:function(t){var e,a,n,o,c,i=[];for(e=0,n=t.length;e<n;++e)for(a=0,o=t[e].length;a<o;++a)i.push(c=t[e][a]),c.$layout={_box:new T,_hidable:!1,_visible:!0,_set:e,_idx:a};return i.sort(function(y,S){var P=y.$layout,I=S.$layout;return P._idx===I._idx?I._set-P._set:I._idx-P._idx}),this.update(i),i},update:function(t){var e,a,n,o,c,i=!1;for(e=0,a=t.length;e<a;++e)o=(n=t[e]).model(),(c=n.$layout)._hidable=o&&"auto"===o.display,c._visible=n.visible(),i|=c._hidable;i&&function(t){var i,e,a,n,o,c;for(i=0,e=t.length;i<e;++i)(n=(a=t[i]).$layout)._visible&&(o=a.geometry(),c=U(a._el._model,a.model(),o),n._box.update(c,o,a.rotation()));(function(t,i){var e,a,n,o;for(e=t.length-1;e>=0;--e)for(n=t[e].$layout,a=e-1;a>=0&&n._visible;--a)(o=t[a].$layout)._visible&&n._box.intersects(o._box)&&i(n,o)})(t,function(y,S){var P=y._hidable,I=S._hidable;P&&I||I?S._visible=!1:P&&(y._visible=!1)})}(t)},lookup:function(t,i){var e,a;for(e=t.length-1;e>=0;--e)if((a=t[e].$layout)&&a._visible&&a._box.contains(i))return t[e];return null},draw:function(t,i){var e,a,n,o,c,y;for(e=0,a=i.length;e<a;++e)(o=(n=i[e]).$layout)._visible&&(c=n.geometry(),y=U(n._el._view,n.model(),c),o._box.update(y,c,n.rotation()),n.draw(t,y))}},K=O.default.helpers,w=O.default.helpers,Y="$datalabels",N="$default";function Z(t,i,e){if(i){var o,a=e.$context,n=e.$groups;!i[n._set]||(o=i[n._set][n._key])&&!0===w.callback(o,[a])&&(t[Y]._dirty=!0,e.update(a))}}function rt(t,i){var n,o,e=t[Y],a=e._listeners;if(a.enter||a.leave){if("mousemove"===i.type)o=X.lookup(e._labels,i);else if("mouseout"!==i.type)return;n=e._hovered,e._hovered=o,function(t,i,e,a){var n,o;!e&&!a||(e?a?e!==a&&(o=n=!0):o=!0:n=!0,o&&Z(t,i.leave,e),n&&Z(t,i.enter,a))}(t,a,n,o)}}return O.default.defaults.global.plugins.datalabels={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(t){if(K.isNullOrUndef(t))return null;var e,a,n,i=t;if(K.isObject(t))if(K.isNullOrUndef(t.label))if(K.isNullOrUndef(t.r))for(i="",n=0,a=(e=Object.keys(t)).length;n<a;++n)i+=(0!==n?", ":"")+e[n]+": "+t[e[n]];else i=t.r;else i=t.label;return""+i},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},{id:"datalabels",beforeInit:function(t){t[Y]={_actives:[]}},beforeUpdate:function(t){var i=t[Y];i._listened=!1,i._listeners={},i._datasets=[],i._labels=[]},afterDatasetUpdate:function(t,i,e){var Q,at,lt,ht,vt,mt,dt,ct,a=i.index,n=t[Y],o=n._datasets[a]=[],c=t.isDatasetVisible(a),y=t.data.datasets[a],S=function(t,i){var o,c,e=t.datalabels,a={},n=[];return!1===e?null:(!0===e&&(e={}),i=w.merge({},[i,e]),o=i.labels||{},c=Object.keys(o),delete i.labels,c.length?c.forEach(function(y){o[y]&&n.push(w.merge({},[i,o[y],{_key:y}]))}):n.push(i),a=n.reduce(function(y,S){return w.each(S.listeners||{},function(P,I){y[I]=y[I]||{},y[I][S._key||N]=P}),delete S.listeners,y},{}),{labels:n,listeners:a})}(y,e),P=i.meta.data||[],I=t.ctx;for(I.save(),Q=0,lt=P.length;Q<lt;++Q)if((dt=P[Q])[Y]=[],c&&dt&&!dt.hidden&&!dt._model.skip)for(at=0,ht=S.labels.length;at<ht;++at)mt=(vt=S.labels[at])._key,(ct=new B(vt,I,dt,Q)).$groups={_set:a,_key:mt||N},ct.$context={active:!1,chart:t,dataIndex:Q,dataset:y,datasetIndex:a},ct.update(ct.$context),dt[Y].push(ct),o.push(ct);I.restore(),w.merge(n._listeners,S.listeners,{merger:function(ut,xt,_t){xt[ut]=xt[ut]||{},xt[ut][i.index]=_t[ut],n._listened=!0}})},afterUpdate:function(t,i){t[Y]._labels=X.prepare(t[Y]._datasets,i)},afterDatasetsDraw:function(t){X.draw(t,t[Y]._labels)},beforeEvent:function(t,i){if(t[Y]._listened)switch(i.type){case"mousemove":case"mouseout":rt(t,i);break;case"click":!function(t,i){var e=t[Y],a=e._listeners.click,n=a&&X.lookup(e._labels,i);n&&Z(t,a,n)}(t,i)}},afterEvent:function(t){var o,c,y,S,P,I,Q,i=t[Y],e=i._actives,a=i._actives=t.lastActive||[],n=A.arrayDiff(e,a);for(o=0,c=n.length;o<c;++o)if((P=n[o])[1])for(y=0,S=(Q=P[0][Y]||[]).length;y<S;++y)(I=Q[y]).$context.active=1===P[1],I.update(I.$context);(i._dirty||n.length)&&(X.update(i._labels),function(t){if(!t.animating){for(var i=O.default.animationService.animations,e=0,a=i.length;e<a;++e)if(i[e].chart===t)return;t.render({duration:1,lazy:!0})}}(t)),delete i._dirty}}}(L(25119))},94036:(q,nt,L)=>{"use strict";L.d(nt,{q:()=>gt});var l=L(42741),M=L(2931),p=L(6517),v=L(25119),b=L(62117),r=L(46243),g=L(7611),F=L(56880),_=L(16274);const D=["dounutChart"];function E(B,tt){if(1&B){const d=l.EpF();l.TgZ(0,"canvas",11,12),l.NdJ("chartHover",function(k){return l.CHM(d),l.oxw(3).chartHovered(k)}),l.qZA()}if(2&B){const d=l.oxw(3);l.Q6J("width",d.width)("height",d.height)("datasets",d.lineChartData)("labels",d.lineChartLabels)("options",d.lineChartOptions)("colors",d.lineChartColors)("legend",d.lineChartLegend)("chartType",d.lineChartType)("plugins",d.lineChartPlugins)}}function C(B,tt){if(1&B&&(l.TgZ(0,"div"),l.YNc(1,E,2,9,"canvas",10),l.qZA()),2&B){const d=l.oxw(2);l.xp6(1),l.Q6J("ngIf",!d.isUpdateAnno)}}function R(B,tt){if(1&B&&l._UZ(0,"canvas",13,14),2&B){const d=l.oxw(2);l.Q6J("width",d.width)("height",d.height)("datasets",d.doughnutChartData)("labels",d.doughnutChart.labels)("chartType",d.doughnutChart.chartType)("colors",d.doughnutChart.colors)("options",d.doughnutChart.options)("plugins",d.doughnutChart.plugins)}}function $(B,tt){if(1&B&&l._UZ(0,"canvas",15),2&B){const d=l.oxw(2);l.Q6J("width",d.width)("datasets",d.monitoringDoughnutChartData)("labels",d.monitoringDoughnutChart.labels)("chartType",d.monitoringDoughnutChart.chartType)("colors",d.monitoringDoughnutChart.colors)("options",d.monitoringDoughnutChart.options)}}function W(B,tt){if(1&B&&l._UZ(0,"canvas",16),2&B){const d=l.oxw(2);l.Q6J("datasets",d.barChart.dataset)("labels",d.barChart.labels)("options",d.barChart.options)("legend",d.barChart.legend)("chartType",d.barChart.chartType)("colors",d.barChart.colors)("plugins",d.barChart.plugins)}}function J(B,tt){1&B&&(l.TgZ(0,"div",20),l._uU(1,"No Data"),l.qZA())}function it(B,tt){if(1&B&&l._UZ(0,"canvas",16),2&B){const d=l.oxw(3);l.Q6J("datasets",d.verticalBarChart.dataset)("labels",d.verticalBarChart.labels)("options",d.verticalBarChart.options)("legend",d.verticalBarChart.legend)("chartType",d.verticalBarChart.chartType)("colors",d.verticalBarChart.colors)("plugins",d.verticalBarChart.plugins)}}function ft(B,tt){if(1&B&&(l.TgZ(0,"div",17),l.YNc(1,J,2,0,"div",18),l.YNc(2,it,1,7,"ng-template",null,19,l.W1O),l.qZA()),2&B){const d=l.MAs(3),x=l.oxw(2);l.xp6(1),l.Q6J("ngIf",x.verticalBarChart.dataset[0].data.length<1)("ngIfElse",d)}}function pt(B,tt){if(1&B&&l._UZ(0,"canvas",21),2&B){const d=l.oxw(2);l.Q6J("height",d.height)("datasets",d.monitoringBarChart.dataset)("labels",d.monitoringBarChart.labels)("options",d.monitoringBarChart.options)("legend",d.monitoringBarChart.legend)("chartType",d.monitoringBarChart.chartType)("colors",d.monitoringBarChart.colors)}}function yt(B,tt){if(1&B&&(l.TgZ(0,"div",3),l.YNc(1,C,2,1,"div",4),l.YNc(2,R,2,8,"canvas",5),l.YNc(3,$,1,6,"canvas",6),l.YNc(4,W,1,7,"canvas",7),l.YNc(5,ft,4,2,"div",8),l.YNc(6,pt,1,7,"canvas",9),l.qZA()),2&B){const d=l.oxw();l.xp6(1),l.Q6J("ngIf","line"===d.chartType),l.xp6(1),l.Q6J("ngIf","doughnut"===d.chartType),l.xp6(1),l.Q6J("ngIf","monitoring-doughnut"===d.chartType&&!d.isLoading),l.xp6(1),l.Q6J("ngIf","bar"===d.chartType),l.xp6(1),l.Q6J("ngIf","vertical-bar"===d.chartType),l.xp6(1),l.Q6J("ngIf","monitoring-bar"===d.chartType)}}function bt(B,tt){1&B&&(l.TgZ(0,"div",22),l.O4$(),l.TgZ(1,"svg",23),l._UZ(2,"circle",24),l.qZA(),l.qZA())}let gt=(()=>{class B{constructor(d,x,k){this.usersService=d,this.commonService=x,this.ref=k,this.width=260,this.height=80,this.chartType="line",this.onClose=new l.vpe,this.onHoverEvent=new l.vpe,this.onReady=new l.vpe,this.isLoading=!0,this.isUpdateAnno=!1,this.isUpdating=!1,this.colorPalette=["#1E88E5"],this.lineChartData=[],this.lineChartLabels=[],this.lineChartPlugins=[b],this.lineChartOptions={responsive:!0,maintainAspectRatio:!1,legend:{display:!1},elements:{line:{borderWidth:1.5,tension:0}},scales:{yAxes:[{gridLines:{color:"rgba(0, 0, 0, 0)",zeroLineWidth:1,zeroLineColor:"rgba(0, 0, 0, 0.1)",offsetGridLines:!1},ticks:{display:!1,beginAtZero:!0,suggestedMin:0}}],xAxes:[{display:!1,gridLines:{display:!1}}]},layout:{padding:{left:-10,right:3,top:10,bottom:3}},hover:{mode:"index",intersect:!1,animationDuration:0},tooltips:{enabled:!1,mode:"index",intersect:!1,position:"nearest",backgroundColor:"#fff",borderColor:"hsla(0, 0%, 0%, 0.1)",borderWidth:1,bodyFontColor:"hsla(0, 0%, 0%, 0.87)",bodyFontSize:12,titleFontColor:"hsla(216, 18%, 41%, 1)",titleMarginBottom:10,titleFontSize:12,custom:function(u){var m;((null===(m=null==u?void 0:u.dataPoints)||void 0===m?void 0:m[0])||{}).index;var s=document.getElementById("chartjs-tooltip");if(s||((s=document.createElement("div")).id="chartjs-tooltip",s.innerHTML='<div style="border-radius:5px;"><table style="border-collapse: collapse; border-radius: 10px; box-shadow: 0px 0px 10px #0000001A;min-width:190px;font-size:12px;"></table></div>',document.body.appendChild(s)),0===u.opacity)return void(s.style.opacity="0");if(s.classList.remove("above","below","no-transform"),s.classList.add(u.yAlign?u.yAlign:"no-transform"),u.body){var X=u.title||[],K=u.body.map(function(rt){return rt.lines}),w='<thead style="background:#F7FAFC;">';X.forEach(function(H){w+='<tr><th style="padding: 5px 10px 5px 10px; color:hsla(216, 18%, 41%, 1); text-align: left;border-top-left-radius: 5px; border-top-right-radius: 5px;">'+H+"</th></tr>"}),w+='</thead><tbody style="background-color: #fff">',w+='<tr style="height:10px;"><td></td></tr>',K.forEach(function(H,ot){var t="background:"+u.labelColors[ot].backgroundColor;if(t+="; width: 10px; height: 10px; border-radius: 10px; margin-top:2px",t+="; margin-right: 5px","string"==typeof H[0]){const e=H[0].split(":")[0],a=H[0].split(":")[1];let o="padding: 5px 10px 5px 10px";o+="; display: flex",o+="; background-color: #fff",w+='<tr border="0"><td border="0"><div style="'+o+'"><div style="'+t+'"></div><div style="width: 100%; display: flex; justify-content: space-between"><div>'+e+':</div><div style="margin-left: 20px">'+a+"</div></div></div></td></tr>"}else{let e="padding: 5px 10px 5px 10px";e+="; display: flex",e+="; background-color: #fff",H.slice(0,10).forEach(a=>{const n=a.name+"",o=a.value;let c="style='color:rgba(0, 0, 0, 0.87)'";n.indexOf("(Deleted)")>-1&&(c="style='color:rgba(0, 0, 0, 0.38)'"),w+='<tr border="0"><td border="0"><div style="'+e+'">'+`<div style="width: 100%; display: flex; justify-content: space-between"><div ${c}>${n}</div><div style="min-width: 14px;"> </div><div style="font-weight: 500;rgba(0, 0, 0, 0.87)">${o}</div></div></div></td></tr>`})}}),w+='<tr style="height:10px;"><td></td></tr>',w+="</tbody>",s.querySelector("table").innerHTML=w}var N=this._chart.canvas.getBoundingClientRect();3*window.innerHeight/4<N.bottom?(s.style.top=N.top-22*K[0].slice(0,10).length-50+"px",s.style.bottom="initial"):(s.style.top=N.bottom+"px",s.style.bottom="initial");const Z=3*window.innerWidth/4,et=N.left+window.pageXOffset+u.caretX;Z<et?(s.style.right=window.innerWidth-et+"px",s.style.left="initial"):(s.style.left=et+"px",s.style.right="initial"),s.style.opacity="1",s.style.position="absolute",s.style.fontFamily=u._bodyFontFamily,s.style.fontSize=u.bodyFontSize+"px",s.style.fontStyle=u._bodyFontStyle,s.style.pointerEvents="none",s.style.backgroundColor="#fff",s.style.borderRadius="10px",s.style.transition="all 0.0s linear",s.style.zIndex="1000000"},callbacks:{labelColor:function(u){return{borderColor:"#fff",backgroundColor:["#1E88E5","#CD3D64","#F5925E","#1EA675","#983705","#FF7F16","#4A5CBB","#366202","#212121","#55647B","#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"][u.datasetIndex],borderWidth:1,borderRadius:1.5}},label:function(u,m){const T=m.datasets[0],s=T.topSites||T.topItems,V=u.index;let X=T.label+": "+T.data[u.index];return s&&s[V].length>0&&(X=s[V]),X}}}},this.lineChartColors=[],this.lineChartLegend=!1,this.lineChartType="line",this.doughnutChartData=[],this.doughnutChart={labels:[],data:[0,0],chartType:"doughnut",options:{legend:{display:!1},responsive:!0,maintainAspectRatio:!1,cutoutPercentage:50,tooltips:{enabled:!1}},colors:[{backgroundColor:["#55647B","#8792A2","#5F81B3","#7f9ac2","#9fb4d0","#c0cedf","#E3E8EE"]}],legend:!1,plugins:{},responsive:!0,maintainAspectRatio:!1},this.monitoringDoughnutChartData=[],this.monitoringDoughnutChart={labels:["site 1","site 2","LG"],data:[1,2,3],chartType:"doughnut",legend:!1,responsive:!0,maintainAspectRatio:!1,options:{responsive:!0,maintainAspectRatio:!1,cutoutPercentage:75,title:{text:""},legend:{display:!1},tooltips:{enabled:!1,mode:"point",position:"average",backgroundColor:"#fff",borderColor:"hsla(0, 0%, 0%, 0.1)",borderWidth:1,bodyFontColor:"hsla(0, 0%, 0%, 0.87)",bodyFontSize:12,titleFontColor:"hsla(216, 18%, 41%, 1)",titleMarginBottom:10,titleFontSize:12,title:"",custom:function(u){var m;((null===(m=null==u?void 0:u.dataPoints)||void 0===m?void 0:m[0])||{}).index;var s=document.getElementById("chartjs-tooltip");if(s||((s=document.createElement("div")).id="chartjs-tooltip",s.innerHTML='<div style="border-radius:5px;"><table style="border-collapse: collapse; border-radius: 10px; box-shadow: 0px 0px 10px #0000001A;min-width:240px;font-size:12px;"></table></div>',document.body.appendChild(s)),0!==u.opacity){if(s.classList.remove("above","below","no-transform"),s.classList.add(u.yAlign?u.yAlign:"no-transform"),u.body){var X=u.title||[],K=u.body.map(function(st){return st.lines}),w='<thead style="background:#F7FAFC;">';X.forEach(function(Z){w+='<tr><th style="padding: 5px 10px 5px 10px; color:hsla(216, 18%, 41%, 1); text-align: left;border-top-left-radius: 5px; border-top-right-radius: 5px;">'+Z+"</th></tr>"}),w+='</thead><tbody style="">',w+='<tr style="height:10px;"><td></td></tr>',K[0].forEach(function(Z,et){var H="background:"+Z.backgroundColor;H+="; width: 10px; height: 10px; border-radius: 10px; margin-top:2px";var ot='<div style="'+(H+="; margin-right: 5px")+'"></div>';let z="padding: 5px 10px 5px 10px";z+="; display: flex",z+="; background-color: #fff";const t=Z.name,e=Z.value;let a="style='color:rgba(0, 0, 0, 0.87);padding-right: 14px'";t.indexOf("(Deleted Site)")>-1&&(a="style='color:rgba(0, 0, 0, 0.38);padding-right: 14px'"),w+='<tr border="0"><td border="0"><div style="padding: 5px 10px 5px 10px; display: flex; background-color: #fff">'+ot+`<div style="width: 100%; display: flex; justify-content: space-between"><div ${a}>${t}</div><div style="font-weight: 500;rgba(0, 0, 0, 0.87)">${e}</div></div></div></td></tr>`}),w+='<tr style="height:10px;"><td></td></tr>',w+="</tbody>",s.querySelector("table").innerHTML=w}var N=this._chart.canvas.getBoundingClientRect();s.style.opacity="1",s.style.position="absolute",s.style.left=N.left+window.pageXOffset+u.caretX+"px",s.style.top=N.top+window.pageYOffset+u.caretY+"px",s.style.fontFamily=u._bodyFontFamily,s.style.fontSize=u.bodyFontSize+"px",s.style.fontStyle=u._bodyFontStyle,s.style.backgroundColor="#fff",s.style.borderRadius="10px",s.style.transition="all 0.1s linear",s.style.zIndex="1000000"}else s.style.opacity="0"},callbacks:{label:function(u,m){const T=m.datasets[0],V=T.backgroundColor;let G=[];return T.topSites.forEach((j,w)=>{j.backgroundColor=V[w],G.push(j)}),G},title:function(u,m){return m.datasets[0].title}}}},colors:[{backgroundColor:["#7CABE4","#55647B","#8792A2","#5F81B2","#39934D","#4DCE6A","#894EA5","#C6A4F0","#B25F5F","#CAA33F","#E3E8EE"]}]},this.monitoringBarChartData=[],this.monitoringBarChart={labels:["site 1","site 2","site 3"],data:[1,2,3],dataset:[{data:[3,3,2,1]}],chartType:"horizontalBar",legend:!1,responsive:!0,maintainAspectRatio:!1,options:{responsive:!0,maintainAspectRatio:!1,cutoutPercentage:75,scales:{yAxes:[{display:!1}],xAxes:[{display:!0,gridLines:{display:!0,zeroLineWidth:1,zeroLineColor:"rgba(0, 0, 0, 0.1)",offsetGridLines:!1,drawTicks:!1,drawBorder:!1,lineWidth:0},ticks:{display:!1,beginAtZero:!0}}]},title:{text:""},legend:{display:!1},tooltips:{enabled:!1,mode:"nearest",intersect:!1,position:"nearest",backgroundColor:"#fff",borderColor:"hsla(0, 0%, 0%, 0.1)",borderWidth:1,bodyFontColor:"hsla(0, 0%, 0%, 0.87)",bodyFontSize:12,titleFontColor:"hsla(216, 18%, 41%, 1)",titleMarginBottom:10,titleFontSize:12,title:"",custom:function(u){var m;((null===(m=null==u?void 0:u.dataPoints)||void 0===m?void 0:m[0])||{}).index;var s=document.getElementById("chartjs-tooltip");if(s||((s=document.createElement("div")).id="chartjs-tooltip",s.innerHTML='<div style="border-radius:5px;"><table style="border-collapse: collapse; border-radius: 10px; box-shadow: 0px 0px 10px #0000001A;min-width:240px;font-size:12px;"></table></div>',document.body.appendChild(s)),0===u.opacity)return void(s.style.opacity="0");if(s.classList.remove("above","below","no-transform"),s.classList.add(u.yAlign?u.yAlign:"no-transform"),u.body){var X=u.title||[],K=u.body.map(function(ot){return ot.lines}),w='<thead style="background:#F7FAFC;">';X.forEach(function(z){w+='<tr><th style="padding: 5px 10px 5px 10px; color:hsla(216, 18%, 41%, 1); text-align: left;border-top-left-radius: 5px; border-top-right-radius: 5px;">'+z+"</th></tr>"}),w+='</thead><tbody style="">',w+='<tr style="height:10px;"><td></td></tr>',K[0].forEach(function(z,t){let n="padding: 5px 10px 5px 10px";n+="; background-color: #fff";const o=null==z?void 0:z.name,c=z.count,y=z.value,S=z.avg;let P="style='color:rgba(0, 0, 0, 0.87);padding-right: 14px'";o.indexOf("(Deleted Site)")>-1&&(P="style='color:rgba(0, 0, 0, 0.38);padding-right: 14px'");let at="padding-top:5px;font-weight: 400;font-size: 10px;line-height: 12px;text-align: right;";at+="color: #55647B;";let lt=`<div style="${at}">Average ${S} \u2022 Openings ${c}</div>`,ht=`<div style="width: 100%; display: flex; justify-content: space-between"><div ${P}>${o}</div><div style="font-weight: 500;rgba(0, 0, 0, 0.87)">${y}</div></div>`;z.isSiteLevel&&(lt=`<div style="${at}">Average ${S} \u2022 Openings ${c}</div>`,ht+=lt),z.isDealerLevel&&(lt=`<div style="${at}">Open Events ${c}</div>`,ht+=lt),w+='<tr border="0"><td border="0"><div style="padding: 5px 10px 5px 10px; background-color: #fff">'+ht+"</div></td></tr>"}),w+='<tr style="height:10px;"><td></td></tr>',w+="</tbody>",s.querySelector("table").innerHTML=w}var N=this._chart.canvas.getBoundingClientRect();3*window.innerHeight/4<N.bottom?(s.style.top=N.top-36*K[0].slice(0,10).length-50+"px",s.style.bottom="initial"):(s.style.top=N.bottom-100+"px",s.style.bottom="initial");const et=N.width;s.style.opacity="1",s.style.position="absolute",4*window.innerWidth/5<N.left+window.pageXOffset+u.caretX?(s.style.right=window.innerWidth-N.right+et/2+"px",s.style.left="initial"):(s.style.left=N.left+window.pageXOffset+et/3+"px",s.style.right="initial"),s.style.fontFamily=u._bodyFontFamily,s.style.fontSize=u.bodyFontSize+"px",s.style.fontStyle=u._bodyFontStyle,s.style.backgroundColor="#fff",s.style.borderRadius="10px",s.style.transition="all 0.0s linear",s.style.zIndex="1000000"},callbacks:{label:function(u,m){const T=m.datasets[0],V=T.backgroundColor;let G=[];return(T.topSites||T.topItems).forEach((j,w)=>{j.backgroundColor=V[w],G.push(j)}),G},title:function(u,m){return m.datasets[0].title}}}},colors:[{backgroundColor:["#55647B","#55647B","#55647B","#55647B","#55647B","#55647B","#55647B","#55647B","#55647B","#55647B","#55647B"]}]},this.barChart={labels:["FW 3.2","FW 3.1","FW 3.0","FW 2.8"],dataset:[{data:[3,3,2,1]}],chartType:"horizontalBar",options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{display:!1}],xAxes:[{display:!0,gridLines:{display:!0,zeroLineWidth:1,zeroLineColor:"rgba(0, 0, 0, 0.1)",offsetGridLines:!1,drawTicks:!1,drawBorder:!1,lineWidth:0},ticks:{display:!1,beginAtZero:!0}}]},hover:{mode:"nearest",intersect:!1,animationDuration:0},plugins:{datalabels:{color:"hsla(216, 18%, 41%, 1)",anchor:"end",align:"end",formatter:function(u,m){return m.chart.data.labels[m.dataIndex]}}},tooltips:{enabled:!1,mode:"index",axis:"y",intersect:!1,animationDuration:0,position:"nearest",backgroundColor:"#fff",borderColor:"hsla(0, 0%, 0%, 0.1)",borderWidth:1,bodyFontColor:"hsla(0, 0%, 0%, 0.87)",bodyFontSize:12,titleFontColor:"hsla(216, 18%, 41%, 1)",titleMarginBottom:10,titleFontSize:12,custom:function(u){var m;((null===(m=null==u?void 0:u.dataPoints)||void 0===m?void 0:m[0])||{}).index;var s=document.getElementById("chartjs-tooltip");if(s||((s=document.createElement("div")).id="chartjs-tooltip",s.innerHTML='<div style="border-radius:5px;"><table style="border-collapse: collapse; border-radius: 10px; box-shadow: 0px 0px 10px #0000001A;min-width:240px;font-size:12px;"></table></div>',document.body.appendChild(s)),0!==u.opacity){if(s.classList.remove("above","below","no-transform"),s.classList.add(u.yAlign?u.yAlign:"no-transform"),u.body){var X=u.title||[],K=u.body.map(function(st){return st.lines}),w='<thead style="background:#F7FAFC;">';X.forEach(function(Z){w+='<tr><th style="padding: 5px 10px 5px 10px; color:hsla(216, 18%, 41%, 1); text-align: left;border-top-left-radius: 5px; border-top-right-radius: 5px;">'+Z+"</th></tr>"}),w+='</thead><tbody style="">',w+='<tr style="height:10px;"><td></td></tr>',K.forEach(function(Z,et){var H="background:"+u.labelColors[et].backgroundColor;if(H+="; width: 10px; height: 10px; border-radius: 10px; margin-top:2px",H+="; margin-right: 5px","string"==typeof Z[0]){const z=Z[0].split(":")[0],t=Z[0].split(":")[1];let e="padding: 5px 10px 5px 10px";e+="; display: flex",e+="; background-color: #fff",w+='<tr border="0"><td border="0"><div style="'+e+'"><div style="'+H+'"></div><div style="width: 100%; display: flex; justify-content: space-between"><div>'+z+'</div><div style="margin-left: 20px">'+t+"</div></div></div></td></tr>"}else{let z="padding: 5px 10px 5px 10px";z+="; display: flex",z+="; background-color: #fff",Z.forEach(t=>{const i=t.name,e=t.count;let a="style='color:rgba(0, 0, 0, 0.87)'";i.indexOf("(Deleted Site)")>-1&&(a="style='color:rgba(0, 0, 0, 0.38)'"),w+='<tr border="0"><td border="0"><div style="'+z+'">'+`<div style="width: 100%; display: flex; justify-content: space-between"><div ${a}>${i}</div><div style="font-weight: 500;rgba(0, 0, 0, 0.87)">${e}</div></div></div></td></tr>`})}}),w+='<tr style="height:10px;"><td></td></tr>',w+="</tbody>",s.querySelector("table").innerHTML=w}var N=this._chart.canvas.getBoundingClientRect();s.style.opacity="1",s.style.position="absolute",s.style.left=N.left+window.pageXOffset+u.caretX+"px",s.style.top=N.top+window.pageYOffset+u.caretY+"px",s.style.fontFamily=u._bodyFontFamily,s.style.fontSize=u.bodyFontSize+"px",s.style.fontStyle=u._bodyFontStyle,s.style.backgroundColor="#fff",s.style.borderRadius="10px",s.style.transition="all 0.0s linear",s.style.zIndex="1000000"}else s.style.opacity="0"},callbacks:{label:function(u,m){const T=m.datasets[0],V=u.index;let X=T.labels[u.index]+": "+T.data[V];return V>3&&(X=T.etcs),X}}}},plugins:[M],legend:!1,colors:[{backgroundColor:["#55647B","#8792A2","#5F81B3","#7f9ac2","#9fb4d0","#c0cedf","#E3E8EE"]}]},this.verticalBarChart={labels:[],legend:!1,desc:"",dataset:[{data:[]}],colors:[{backgroundColor:"#1e88e5"}],chartType:"bar",options:{onClick:function(u,m){this.chartService.updateClickedData({event:u,activeElements:m})}.bind(this),responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{display:!1,gridLines:{display:!0,zeroLineWidth:1,zeroLineColor:"rgba(0, 0, 0, 0.1)",offsetGridLines:!1,drawTicks:!1,drawBorder:!1,lineWidth:0},ticks:{display:!1,beginAtZero:!0}}],xAxes:[{display:!0,gridLines:{display:!0,zeroLineWidth:1,zeroLineColor:"rgba(0, 0, 0, 0.1)",offsetGridLines:!1,drawTicks:!1,drawBorder:!1,lineWidth:0},ticks:{display:!1,beginAtZero:!0}}]},hover:{mode:"index",intersect:!1,animationDuration:0},tooltips:{enabled:!1,mode:"index",intersect:!1,position:"nearest",backgroundColor:"#fff",bodyFontColor:"hsla(0, 0%, 0%, 0.87)",bodyFontSize:12,titleFontColor:"hsla(216, 18%, 41%, 1)",titleFontSize:12,custom:function(u){var m;((null===(m=null==u?void 0:u.dataPoints)||void 0===m?void 0:m[0])||{}).index;var s=document.getElementById("chartjs-tooltip");if(s||((s=document.createElement("div")).id="chartjs-tooltip",s.innerHTML='<div style="border-radius:5px; border: 1px solid rgba(0, 0, 0, 0.1);"><table style="border-collapse:collapse; box-shadow: 0px 0px 10px #0000001A; min-width:190px; font-size:12px;"></table></div>',document.body.appendChild(s)),0===u.opacity)return void(s.style.opacity="0");if(s.classList.remove("above","below","no-transform"),s.classList.add(u.yAlign?u.yAlign:"no-transform"),u.body){var X=u.title||[],K=u.body.map(function(rt){return rt.lines}),w='<thead style="background:#F7FAFC;">';X.forEach(function(H){w+='<tr><th style="padding: 5px 10px 5px 10px; color:hsla(216, 18%, 41%, 1); text-align: left">'+H+"</th></tr>"}),w+='</thead><tbody style="background-color: #fff">',K.forEach(function(H,ot){var z,t,e=`background:${u.labelColors[ot].backgroundColor}; width: 8px; height: 8px; border-radius: 50%; margin-right: 5px;`;if("string"==typeof H[0]){const n=H[0].split(":")[0],o=H[0].split(":")[1];w+='<tr border="0"><td border="0"><div style="padding: 5px 10px 5px 10px; display: flex; justify-content: flex-start; align-items: center;"><div style="'+e+'"></div><div style="width: 100%; display: flex; justify-content: space-between"><div>'+n+'</div><div style="margin-left: 20px; font-weight:500;">'+o+"</div></div></div></td></tr>",(null===(z=null==this?void 0:this.verticalBarChart)||void 0===z?void 0:z.desc)&&(w+=`<tr border="0"><td border="0"><div style="padding: 0px 10px 5px 10px; display: flex; justify-content: flex-start; align-items: center; color:rgba(0, 0, 0, 0.38);"> ${null===(t=null==this?void 0:this.verticalBarChart)||void 0===t?void 0:t.desc} </div></td></tr>`)}}.bind(this)),w+="</tbody>",s.querySelector("table").innerHTML=w}var N=this.chart.chart.canvas.getBoundingClientRect();let st=s.getBoundingClientRect();s.style.top=N.top-st.height-10+"px",s.style.bottom="initial";const Z=3*window.innerWidth/4,et=N.left+window.pageXOffset+u.caretX;Z<et?(s.style.right=window.innerWidth-et+"px",s.style.left="initial"):(s.style.left=et+"px",s.style.right="initial"),s.style.opacity="1",s.style.position="absolute",s.style.fontFamily=u._bodyFontFamily,s.style.fontSize=u.bodyFontSize+"px",s.style.fontStyle=u._bodyFontStyle,s.style.pointerEvents="none",s.style.backgroundColor="#fff",s.style.borderRadius="10px",s.style.transition="all 0.0s linear",s.style.zIndex="1000000"}.bind(this)}}}}ngOnInit(){v.Chart.pluginService.register(b)}ngOnChanges(d){d.active&&this.active&&this.usersService.getMe().subscribe(x=>{this.me=x,this.initInfo()}),(d.rangeLabel&&this.rangeLabel||d.updates&&this.updates)&&this.active&&(this.isUpdating||this.updateChart())}updateChart(){let d=!1;this.isUpdating=!0,this.data.data&&("line"===this.chartType&&this.data.data.data&&(d=!0),("doughnut"===this.chartType||"monitoring-doughnut"===this.chartType||"monitoring-bar"===this.chartType||"bar"===this.chartType||"vertical-bar"===this.chartType)&&(d=!0)),d&&(this.initInfo(),this.chart&&this.chart.refresh(),this.isUpdating=!1)}initInfo(){this.isLoading=!0,this.initChartData(),"line"===this.chartType&&(this.setLineChartData(this.data),this.lineChartOptions.scales.yAxes[0].ticks.max=this.annotation),"doughnut"===this.chartType&&this.setDoughnutChartData(this.data),"monitoring-doughnut"===this.chartType&&this.setMonitoringDoughnutChartData(this.data),"monitoring-bar"===this.chartType&&this.setMonitoringBarChartData(this.data),"bar"===this.chartType&&this.setBarChartData(this.data),"vertical-bar"===this.chartType&&this.setVerticalBarChartData(this.data),setTimeout(()=>{this.isLoading=!1,this.onReady.emit(!0)},500)}setVerticalLine(){v.Chart.defaults.LineWithLine=v.Chart.defaults.line,v.Chart.controllers.LineWithLine=v.Chart.controllers.line.extend({draw:function(d){console.log("draw");let x=this.chart||{};if(v.Chart.controllers.line.prototype.draw.call(this,d),x.tooltip._active&&x.tooltip._active.length){let u=x.ctx,m=x.tooltip._active[0].tooltipPosition().x,T=x.scales["y-axis-0"].top,U=x.scales["y-axis-0"].bottom;u.save(),u.beginPath(),u.moveTo(m,T),u.lineTo(m,U),u.lineWidth=2,u.strokeStyle="#07C",u.stroke(),u.restore()}}})}setLineChartData(d){let x=d.data,k=x.data.length-1;this.lineChartOptions.scales.yAxes[0].ticks.max=1.2*Math.max(...x.data),x.data.every((T,U)=>(k=U,null!==T))||(k-=1);let m=[...Array(x.data.length)].map(T=>0);m[k]=2,x.pointRadius=m,x.pointHoverRadius=2,x.pointHoverBorderWidth=2,this.lineChartData=[x],this.lineChartLabels=d.labels,m[k]=2,x.pointRadius=m,this.lineChartData=[x]}setLineAnnotation(){const d=this.annotation;let x=0,k="0";x="string"==typeof d?parseInt(d):d,k="string"==typeof d?this.parseTimeFormat(d):d.toString(),k="max= "+k,this.lineChartOptions.annotation={annotations:[{type:"line",mode:"horizontal",scaleID:"y-axis-0",value:x,borderColor:"gray",borderWidth:.5,borderDash:[5,5],label:{enabled:!0,position:"center",content:k,backgroundColor:"transparent",borderColor:"transparent",fontColor:"rgba(0, 0, 0, 0.6)",yAdjust:-5,font:{size:11,color:"#000"}}}]}}setDoughnutChartData(d){const x=r.cloneDeep(d);x.label="Count",this.doughnutChartData=[x],this.doughnutChart.data=d.data,this.doughnutChart.labels=d.labels,Object.keys(d).includes("colors")&&(this.doughnutChart.colors=d.colors)}setMonitoringDoughnutChartData(d){const x=r.cloneDeep(d);x.label="Count",this.monitoringDoughnutChartData=[x],this.monitoringDoughnutChart.data=d.data,this.monitoringDoughnutChart.labels=d.labels,this.monitoringDoughnutChart.options.tooltips.title=d.title}setMonitoringBarChartData(d){const x=r.cloneDeep(d);x.label="Count",this.monitoringBarChart.dataset=[x],this.monitoringBarChart.data=d.data,this.monitoringBarChart.labels=d.labels,this.monitoringBarChart.options.tooltips.title=d.title}setBarChartData(d){const x=r.cloneDeep(d);let k=Math.max(...d.data);k+=.3*k,this.barChart.dataset=[x],this.barChart.labels=d.labels,this.barChart.options.scales.xAxes[0].ticks.max=k}setVerticalBarChartData(d){let x=null;d.max&&(x=d.max);const k=r.cloneDeep(d);this.verticalBarChart.dataset=[k],this.verticalBarChart.labels=null==k?void 0:k.labels,this.verticalBarChart.options.scales.yAxes[0].ticks.max=x,this.verticalBarChart.desc=null==k?void 0:k.desc}initChartData(){this.lineChartData=[],this.lineChartLabels=[],this.lineChartColors=[],this.colorPalette.forEach(d=>{this.lineChartColors.push({backgroundColor:"transparent",borderColor:d,pointBackgroundColor:d})})}chartHovered({active:x}){const k=this.data.data,u=(null==x?void 0:x[0])||null;if(!u)return;const m=u._index,T=[...Array(k.pointRadius)];T[m]=2,k.pointRadius=T,this.onHoverEvent.emit(k.data[m])}parseTimeFormat(d){let x=Math.round(d),k=Math.floor(x/3600),u=Math.floor((x-3600*k)/60),m=x-3600*k-60*u,T=`${m}s`;return u>0&&(T=`${u}m ${m}s`),k>0&&(T=`${k}h ${u}m`),T}ngOnDestroy(){}}return B.\u0275fac=function(d){return new(d||B)(l.Y36(g.f),l.Y36(F.v),l.Y36(l.sBO))},B.\u0275cmp=l.Xpm({type:B,selectors:[["dashboard-chart"]],viewQuery:function(d,x){if(1&d&&(l.Gf(D,5),l.Gf(p.jh,5)),2&d){let k;l.iGM(k=l.CRH())&&(x.dounutChart=k.first),l.iGM(k=l.CRH())&&(x.chart=k.first)}},inputs:{active:"active",data:"data",width:"width",height:"height",chartType:"chartType",topSites:"topSites",annotation:"annotation",rangeLabel:"rangeLabel",updates:"updates"},outputs:{onClose:"onClose",onHoverEvent:"onHoverEvent",onReady:"onReady"},features:[l.TTD],decls:3,vars:2,consts:[[1,"chart-container"],["class","chart",4,"ngIf"],["class","chart-loader absolute",4,"ngIf"],[1,"chart"],[4,"ngIf"],["baseChart","",3,"width","height","datasets","labels","chartType","colors","options","plugins",4,"ngIf"],["baseChart","","height","150",3,"width","datasets","labels","chartType","colors","options",4,"ngIf"],["baseChart","",3,"datasets","labels","options","legend","chartType","colors","plugins",4,"ngIf"],["class","vertical-bar",4,"ngIf"],["baseChart","",3,"height","datasets","labels","options","legend","chartType","colors",4,"ngIf"],["baseChart","",3,"width","height","datasets","labels","options","colors","legend","chartType","plugins","chartHover",4,"ngIf"],["baseChart","",3,"width","height","datasets","labels","options","colors","legend","chartType","plugins","chartHover"],["lineChart",""],["baseChart","",3,"width","height","datasets","labels","chartType","colors","options","plugins"],["dounutChart",""],["baseChart","","height","150",3,"width","datasets","labels","chartType","colors","options"],["baseChart","",3,"datasets","labels","options","legend","chartType","colors","plugins"],[1,"vertical-bar"],["class","no-data",4,"ngIf","ngIfElse"],["verticalBar",""],[1,"no-data"],["baseChart","",3,"height","datasets","labels","options","legend","chartType","colors"],[1,"chart-loader","absolute"],["viewBox","25 25 50 50",1,"circular"],["cx","50","cy","50","r","15","fill","none","stroke-width","4","stroke-miterlimit","10",1,"path"]],template:function(d,x){1&d&&(l.TgZ(0,"div",0),l.YNc(1,yt,7,6,"div",1),l.YNc(2,bt,3,0,"div",2),l.qZA()),2&d&&(l.xp6(1),l.Q6J("ngIf",x.active),l.xp6(1),l.Q6J("ngIf",x.isLoading))},directives:[_.O5,p.jh],styles:['.chart-container[_ngcontent-%COMP%]{position:relative;width:100%;min-height:80px}.line-x-axis[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1)}.chart-loader[_ngcontent-%COMP%]{position:relative;margin:0 auto;width:28px}.chart-loader.absolute[_ngcontent-%COMP%]{margin:auto;position:absolute;top:calc(50% - 14px);left:calc(50% - 14px)}.chart-loader[_ngcontent-%COMP%]:before{content:"";display:block;padding-top:100%}.chart-loader[_ngcontent-%COMP%]   .circular[_ngcontent-%COMP%]{animation:rotate 3s linear infinite;height:100%;transform-origin:center center;width:100%;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}.chart-loader[_ngcontent-%COMP%]   .circular[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{stroke-dasharray:1,200;stroke-dashoffset:0;animation:dash 1.5s ease-in-out infinite;stroke:#8691a2;stroke-linecap:round}.vertical-bar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.no-data[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);font-size:16px;color:#00000061}']}),B})()}}]);